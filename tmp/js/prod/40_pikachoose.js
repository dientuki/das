(function(b){var c={autoPlay:true,speed:5000,text:{play:"",stop:"",previous:"Previous",next:"Next"},transition:[1],showCaption:true,IESafe:false,showTooltips:false,carousel:false,carouselVertical:false,animationFinished:null,buildFinished:null,bindFinished:null,startOn:0,thumbOpacity:0.4,hoverPause:false,thumbName:"-thumb"};
b.fn.PikaChoose=function(d){return this.each(function(){b(this).data("pikachoose",new a(this,d))})};b.PikaChoose=function(h,i){this.options=b.extend({},c,i||{});this.list=null;this.image=null;this.anchor=null;
this.caption=null;this.imgNav=null;this.imgPlay=null;this.imgPrev=null;this.imgNext=null;this.textNext=null;this.textPrev=null;this.previous=null;this.next=null;this.aniWrap=null;this.aniDiv=null;this.aniImg=null;
this.thumbs=null;this.transition=null;this.active=null;this.tooltip=null;this.animating=false;this.stillOut=null;this.counter=null;this.timeOut=null;if(typeof(this.options.data)!="undefined"){h=b("<ul></ul>").appendTo(h);
b.each(this.options.data,function(){if(typeof(this.link)!="undefined"){var e=b("<li><a href='"+this.link+"'><img></a></li>").appendTo(h);if(typeof(this.title)!="undefined"){e.find("a").attr("title",this.title)
}}else{var e=b("<li><img></li>").appendTo(h)}if(typeof(this.caption)!="undefined"){e.append("<span>"+this.caption+"</span>")}if(typeof(this.thumbnail)!="undefined"){e.find("img").attr("ref",this.image);
e.find("img").attr("src",this.thumbnail)}else{e.find("img").attr("src",this.image)}})}if(h.nodeName=="UL"||h.nodeName=="OL"||h instanceof jQuery){this.list=b(h);this.build();this.bindEvents()}else{return
}var j=0;var d=0;for(var g=0;g<25;g++){var f='<div col="'+j+'" row="'+d+'"></div>';this.aniDiv.append(f);j++;if(j==5){d++;j=0}}};var a=b.PikaChoose;a.fn=a.prototype={pikachoose:"4.3.1"};b.fn.pikachoose=b.fn.PikaChoose;
a.fn.extend=a.extend=b.extend;a.fn.extend({build:function(){this.step=0;this.wrap=this.list.parent().find(".pika-stage");this.image=b("<img>").appendTo(this.wrap);this.imgNav=b("<div class='pika-imgnav'></div>").insertAfter(this.image);
this.imgPlay=b("<a></a>").appendTo(this.imgNav);this.counter=b("<span class='pika-counter'></span>").appendTo(this.imgNav);if(this.options.autoPlay){this.imgPlay.addClass("pause")}else{this.imgPlay.addClass("play")
}this.imgPrev=b("<a class='previous'></a>").insertAfter(this.imgPlay);this.imgNext=b("<a class='next'></a>").insertAfter(this.imgPrev);this.caption=this.list.parent().find(".pika-caption");if(this.options.tooltip==true){this.tooltip=b("<div class='pika-tooltip'></div>").insertAfter(this.list).hide()
}this.aniWrap=b("<div class='pika-aniwrap'></div>").insertAfter(this.imgNav);this.aniImg=b("<img>").appendTo(this.aniWrap).hide();this.aniDiv=b("<div class='pika-ani'></div>").appendTo(this.aniWrap);this.textNav=b("<div class='pika-textnav'></div>").insertAfter(this.aniWrap);
this.textPrev=b("<a class='previous'>"+this.options.text.previous+"</a>").appendTo(this.textNav);this.textNext=b("<a class='next'>"+this.options.text.next+"</a>").appendTo(this.textNav);this.list.children("li").wrapInner("<div class='clip' />");
this.thumbs=this.list.find("img");this.active=this.thumbs.eq(this.options.startOn);this.finishAnimating({source:this.active.attr("ref")||this.active.attr("src"),caption:this.active.parents("li:first").find("span:first").html(),clickThrough:this.active.parent().attr("href")||"",clickThroughTitle:this.active.parent().attr("title")||""});
var d=this;this.thumbs.each(function(){d.createThumb(b(this),d)});if(typeof(this.options.buildFinished)=="function"){this.options.buildFinished(this)}},createThumb:function(g){var d=g;var e=this;b.data(g[0],"clickThrough",d.parent("a").attr("href")||"");
b.data(g[0],"clickThroughTitle",d.parent("a").attr("title")||"");if(d.parent("a").length>0){d.unwrap()}b.data(g[0],"caption",d.next("span").html()||"");d.next("span").remove();b.data(g[0],"source",d.attr("ref")||d.attr("src"));
b.data(g[0],"order",d.closest("ul").find("li").index(d.parents("li")));var f=b.data(g[0]);b("<img />").bind("load",{data:f},function(){if(typeof(e.options.buildThumbStart)=="function"){e.options.buildThumbStart(e)
}d.hover(function(h){clearTimeout(e.stillOut);b(this).stop(true,true).fadeTo(250,1);if(!e.options.showTooltips){return}e.tooltip.show().stop(true,true).html(f.caption).animate({top:b(this).parent().position().top,left:b(this).parent().position().left,opacity:1},"fast")
},function(h){if(!b(this).hasClass("active")){b(this).stop(true,true).fadeTo(250,e.options.thumbOpacity);e.stillOut=setTimeout(e.hideTooltip,700)}});if(f.order==e.options.startOn){d.fadeTo(250,1);d.addClass("active");
d.parents("li").eq(0).addClass("active")}else{d.fadeTo(250,e.options.thumbOpacity)}if(typeof(e.options.buildThumbFinish)=="function"){e.options.buildThumbFinish(e)}}).attr("src",d.attr("src"))},bindEvents:function(){this.thumbs.bind("click",{self:this},this.imgClick);
this.imgNext.bind("click",{self:this},this.nextClick);this.textNext.bind("click",{self:this},this.nextClick);this.imgPrev.bind("click",{self:this},this.prevClick);this.textPrev.bind("click",{self:this},this.prevClick);
this.imgPlay.bind("click",{self:this},this.playClick);this.wrap.bind("mouseenter",{self:this},function(d){d.data.self.imgNav.stop(true,true).fadeIn("slow");if(d.data.self.options.hoverPause==true){clearTimeout(d.data.self.timeOut)
}});this.wrap.bind("mouseleave",{self:this},function(d){d.data.self.imgNav.stop(true,true).fadeOut("slow");if(d.data.self.options.autoPlay==true&&d.data.self.options.hoverPause){d.data.self.timeOut=setTimeout((function(e){return function(){e.nextClick()
}})(d.data.self),d.data.self.options.speed)}});if(this.options.tooltip==true){this.tooltip.bind("mouseenter",{self:this},function(d){clearTimeout(d.data.self.stillOut)})}if(this.options.tooltip==true){this.tooltip.bind("mouseleave",{self:this},function(d){d.data.self.stillOut=setTimeout(d.data.self.hideTooltip,700)
})}if(typeof(this.options.bindsFinished)=="function"){this.options.bindsFinished(this)}},hideTooltip:function(d){b(".pika-tooltip").animate({opacity:0.01})},imgClick:function(h,d){var f=h.data.self;var g=b.data(this);
if(f.animating){return}f.animating=true;f.active.fadeTo(300,f.options.thumbOpacity).removeClass("active");f.active.parents(".active").eq(0).removeClass("active");f.active=b(this);f.active.addClass("active").fadeTo(200,1);
f.active.parents("li").eq(0).addClass("active");b("<img />").bind("load",{self:f,data:g},function(){f.aniDiv.css({height:f.image.height(),width:f.image.width()}).fadeIn("fast");f.aniDiv.children("div").css({width:"20%",height:"20%","float":"left"});
var e=0;if(f.options.transition[0]==-1){e=Math.floor(Math.random()*7)+1}else{e=f.options.transition[f.step];f.step++;if(f.step>=f.options.transition.length){f.step=0}}if(f.options.IESafe&&b.browser.msie){e=1
}f.doAnimation(e,g)}).attr("src",b.data(this).source)},doAnimation:function(i,g){var e=this;e.image.stop(true,false);var f=e.aniDiv.children("div").eq(0).width();var h=e.aniDiv.children("div").eq(0).height();
var d=new Image();g.source=g.source.replace(this.options.thumbName,"");b(d).attr("src",g.source);if(d.height!=e.image.height()||d.width!=e.image.width()){if(i!=0&&i!=1&&i!=7){i=1}}e.aniDiv.css({height:d.height,width:d.width});
e.aniDiv.children().each(function(){var l=b(this);var j=Math.floor(l.parent().width()/5)*l.attr("col");var k=Math.floor(l.parent().height()/5)*l.attr("row");l.css({background:"url("+g.source+") -"+j+"px -"+k+"px",width:"0px",height:"0px",position:"absolute",top:k+"px",left:j+"px","float":"none"})
});e.aniDiv.hide();e.aniImg.hide();switch(i){case 0:e.image.stop(true,true).fadeOut("slow",function(){e.image.attr("src",g.source).fadeIn("slow",function(){e.finishAnimating(g)})});break;case 1:e.aniDiv.hide();
e.aniImg.height(e.image.height()).hide().attr("src",g.source);b.when(e.image.fadeOut("slow"),e.aniImg.eq(0).fadeIn("slow")).done(function(){e.finishAnimating(g)});break;case 2:e.aniDiv.show().children().hide().each(function(k){var j=k*30;
b(this).css({opacity:0.1}).show().delay(j).animate({opacity:1,width:f,height:h},200,"linear",function(){if(e.aniDiv.find("div").index(this)==24){e.finishAnimating(g)}})});break;case 3:e.aniDiv.show().children("div:lt(5)").hide().each(function(k){var j=b(this).attr("col")*100;
b(this).css({opacity:0.1,width:f}).show().delay(j).animate({opacity:1,height:e.image.height()},700,"linear",function(){if(e.aniDiv.find(" div").index(this)==4){e.finishAnimating(g)}})});break;case 4:e.aniDiv.show().children().hide().each(function(k){if(k>4){return
}var j=b(this).attr("col")*10;h=e.gapper(b(this),h);b(this).css({opacity:0.1,height:"100%"}).show().animate({opacity:1,width:f},500,"linear",function(){if(e.aniDiv.find(" div").index(this)==4){e.finishAnimating(g)
}})});break;case 5:e.aniDiv.show().children().show().each(function(k){var j=k*Math.floor(Math.random()*5)*7;h=e.gapper(b(this),h);if(b(".animation div").index(this)==24){j=600}b(this).css({height:h,width:f,opacity:0.01}).delay(j).animate({opacity:1},600,function(){if(e.aniDiv.find(" div").index(this)==24){e.finishAnimating(g)
}})});break;case 6:e.aniDiv.height(e.image.height()).hide().css({background:"url("+g.source+") top left no-repeat"});e.aniDiv.children("div").hide();e.aniDiv.css({width:0}).show().animate({width:e.image.width()},"slow",function(){e.finishAnimating(g);
e.aniDiv.css({background:"transparent"})});break;case 7:e.wrap.css({overflow:"hidden"});e.aniImg.height(e.image.height()).hide().attr("src",g.source);e.aniDiv.hide();e.image.css({position:"relative"}).animate({left:"-"+e.wrap.outerWidth()+"px"});
e.aniImg.show();e.aniWrap.css({left:e.wrap.outerWidth()}).show().animate({left:"0px"},"slow",function(){e.finishAnimating(g)});break}},finishAnimating:function(f){this.animating=false;f.source=f.source.replace(this.options.thumbName,"");
this.image.attr("src",f.source);this.image.css({left:"0"});this.image.show();var d=this;b("<img />").bind("load",function(){d.aniImg.hide();d.aniDiv.hide()}).attr("src",f.source);var g=this.list.find("img").index(this.active);
g++;var e=this.list.find("img").length;this.counter.html(g+"/"+e);if(f.clickThrough!=""){if(this.anchor==null){this.anchor=this.image.wrap("<a>").parent()}this.anchor.attr("href",f.clickThrough);this.anchor.attr("title",f.clickThroughTitle)
}else{if(this.image.parent("a").length>0){this.image.unwrap()}this.anchor=null}if(this.options.showCaption&&f.caption!=""&&f.caption!=null){this.caption.html(f.caption)}if(this.options.autoPlay==true){var d=this;
clearTimeout(this.timeOut);this.timeOut=setTimeout((function(h){return function(){h.nextClick()}})(this),this.options.speed,this.timeOut)}if(typeof(this.options.animationFinished)=="function"){this.options.animationFinished(this)
}},gapper:function(d,e){if(d.attr("row")==9&&d.attr("col")==0){var f=ani_divs.height()-(e*9);return f}return e},nextClick:function(i){var g="natural";try{var d=i.data.self;if(typeof(i.data.self.options.next)=="function"){i.data.self.options.next(this)
}}catch(h){var d=this;g="auto"}var f=d.active.parents("li:first").next().find("img");if(f.length==0){f=d.list.find("img").eq(0)}f.trigger("click",{how:g})},prevClick:function(g){if(typeof(g.data.self.options.previous)=="function"){g.data.self.options.previous(this)
}var d=g.data.self;var f=d.active.parents("li:first").prev().find("img");if(f.length==0){f=d.list.find("img:last")}f.trigger("click")},playClick:function(f){var d=f.data.self;d.options.autoPlay=!d.options.autoPlay;
d.imgPlay.toggleClass("play").toggleClass("pause");if(d.options.autoPlay){d.nextClick()}}})})(jQuery);